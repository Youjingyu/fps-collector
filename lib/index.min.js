/*!
 * @version 0.2.0
 * @date 2018-01-11
 */
!function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["fps-collector"]=e():t["fps-collector"]=e()}("undefined"!==typeof self?self:this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,n){t.exports=n(4).default},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(){r(this,t),this.handlers={}}return o(t,[{key:"on",value:function(t,e){return this.handlers[t]=this.handlers[t]||[],this.handlers[t].push(e),this.handlers[t]}},{key:"off",value:function(t){this.handlers[t]&&delete this.handlers[t]}},{key:"trigger",value:function(t,e){var n=this,r=e||[],o=this.handlers[t];return!o||o.every(function(t){return!1!==t.apply(n,r)})}}]),t}();e.a=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),o=n(5);n.d(e,"collectAnimationFps",function(){return r.a}),n.d(e,"collectScrollFps",function(){return o.a})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return f});var u=n(0),a=n.n(u),c=n(1),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=document,f=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.config={duration:t.duration||2e3},n.fps=0,n.animations=[],n._endCollection=null,n._eventFunc=n._collect.bind(n),n}return i(e,t),l(e,[{key:"start",value:function(){var t=this;this._endCollection=a()(),s.addEventListener("animationstart",this._eventFunc),setTimeout(function(){t.stop(function(e){t.trigger("end",[e])})},this.config.duration)}},{key:"stop",value:function(t){s.removeEventListener("animationstart",this._eventFunc),this.fps=this._endCollection(),t&&t({fps:this.fps,animations:this.animations})}},{key:"_collect",value:function(t){this._isRepeat(t)||this.animations.push({name:t.animationName})}},{key:"_isRepeat",value:function(t){for(var e=this.animations,n=0,r=e.length;n<r;n++)if(t.animationName===e[n].name)return!0;return!1}}]),e}(c.a)},function(t,e){t.exports=function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(){if(!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window).requestAnimationFrame)throw new Error("requestAnimationFrame is not available");var t=[],e=function(){return t.push([!document.hidden,Date.now()])};document.addEventListener("visibilitychange",e);var n=!0,r=[],o=function t(){n&&(r.push(Date.now()),window.requestAnimationFrame(t))};return window.requestAnimationFrame(o),function(){return n=!1,document.removeEventListener("visibilitychange",e),(0,i.default)(r,t)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var o=n(1),i=function(t){return t&&t.__esModule?t:{default:t}}(o)},function(t,e){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.default=function(t,e){var n=t.length;return n<2?0:1e3/((t[t.length-1]-t[0]-o(e))/(n-1))};var o=e.getTotalHiddenTime=function(t){return t.reduce(i,[]).filter(u).map(a).reduce(c,0)},i=function(t,e){var o=r(e,2),i=o[0],u=o[1];if(i&&0===t.length)return t;var a=t[t.length-1],c=t.slice(0,-1);return i?[].concat(n(c),[[a[0],u]]):[].concat(n(t),[[u]])},u=function(t){var e=r(t,2);return null!=(e[0],e[1])},a=function(t){var e=r(t,2),n=e[0];return e[1]-n},c=function(t,e){return t+e}}])},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return p});var u=n(0),a=n.n(u),c=n(1),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=window,f=document,p=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.config={threshold:t.threshold||2},n.fps=0,n._eventFunc=n._addScrollEvent.bind(n),n._timer=null,n._scrollStart=!1,n}return i(e,t),l(e,[{key:"start",value:function(){var t=this;f.addEventListener("scroll",this._eventFunc);var e=void 0,n=void 0,r=this._getScrollTo(),o=s.screen.height;this.on("startScroll",function(){e=s.performance.now(),n=a()()}),this.on("endScroll",function(){var i=s.performance.now(),u=t._getScrollTo(),a=u-r,c=a/o/((i-e)/1e3);e=i,r=u,t.fps=n(),Math.abs(a)>=2*o&&Math.abs(c)>=t.config.threshold&&t.trigger("end",[{fps:t.fps,speed:c}])})}},{key:"stop",value:function(){f.removeEventListener("scroll",this._eventFunc)}},{key:"_addScrollEvent",value:function(){var t=this;this._scrollStart||(this.trigger("startScroll"),this._scrollStart=!0),clearTimeout(this._timer),this._timer=setTimeout(function(){t.trigger("endScroll"),t._scrollStart=!1},100)}},{key:"_getScrollTo",value:function(){return s.pageYOffset||f.documentElement.scrollTop||f.body.scrollTop||0}}]),e}(c.a)}])});